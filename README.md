# ExoFarm: Agricultural Technosignatures in Exoplanetary Atmospheres

[![VULCAN](https://img.shields.io/badge/Model-VULCAN-blue)](https://github.com/exoclime/VULCAN)
[![Python](https://img.shields.io/badge/Python-3.x-yellow)]()

---

This project investigates the atmospheric detectability of intensive, industrial-scale agriculture ("ExoFarms") on Earth-like exoplanets. By utilizing the **VULCAN** 1D photochemical kinetics model, we simulate the atmospheric accumulation of Nitrogen-based technosignatures—specifically Nitrous Oxide ($N_2O$) and Ammonia ($NH_3$)—resulting from the disruption of the planetary nitrogen cycle by Haber-Bosch-like processes.

The study compares two distinct stellar environments:
1.  **Earth-Sun System (G2V)**: A benchmark case representing current Earth conditions.
2.  **Earth-TRAPPIST-1e System (M8V)**: A potentially habitable planet orbiting an ultra-cool dwarf star.

Our goal is to quantify how the different UV flux environments affect the photochemical lifetime of these agricultural gases, determining whether "ExoFarms" could provide a detectable technosignature distinct from natural biological baselines.

**Chemical Network Note:**
All simulations use the `thermo/NCHO_earth_photo_network.txt` chemical network. This configuration excludes sulfur species to focus purely on the Nitrogen-Carbon-Hydrogen-Oxygen chemistry relevant to the simulated biosignatures.

---

## Directory Structure

### 1. ExoFarm_Research/Config
Contains all configuration files necessary for the simulations.
- **Boundary_Conditions/**: Boundary Condition (BC) flux files for different scenarios (Pre-Agri, Present, ExoFarm, etc.).
- **planets/**: YAML configuration files for VULCAN, organized by planetary system (Earth-Sun, Earth-Trappist).

### 2. ExoFarm_Research/Results
Stores the results generated by simulations and analyses.
- **Outputs/**: Raw output files from VULCAN (`.vul`).
- **Plots/**: Plots generated by the visualization scripts.

### 3. ExoFarm_Research/Scripts
Contains the source code organized by functionality.

#### Simulation
Scripts to execute VULCAN simulations.
- `run_parallel_earth.py`: Runs parallel simulations for Earth (Sun) scenarios.
- `run_parallel_trappist.py`: Runs parallel simulations for TRAPPIST-1e scenarios.

#### Analysis
Scripts to process data and generate tables.
- `extract_surface_values.py`: Extracts surface mixing ratios and generates comparative tables in the terminal.

#### Plotting
Scripts to generate visualizations.
- `run_all_plots.py`: **Master script** that executes all relevant plotting scripts in sequence.
- `plot_agricultural_comparison.py`: Generates comparisons of agricultural scenarios (Earth, 4 molecules).
- `plot_trappist_comparison.py`: Generates comparisons of agricultural scenarios (TRAPPIST-1e, 4 molecules).
- `plot_star_comparison.py`: Plots comparative profiles (including OH) and trends (4 molecules) for Earth vs TRAPPIST.
- `plot_spectra_comparison.py`: Compares stellar spectra.
- `plot_surface_normalized_bars.py`: Generates bar charts of normalized abundances.

---

## Simulation Scenarios

We simulate four distinct agricultural intensity levels for both star systems. The surface boundary conditions for key species are defined as follows:

### Agricultural Flux Table (Surface Emissions)
All fluxes are in units of **molecules cm⁻² s⁻¹**.

| ID | Scenario Name | Description | $N_2O$ Flux | $NH_3$ Flux | Scaling Factor (approx.) |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **A0** | **Pre-Agricultural** | Natural biological baseline. | $9.0 \times 10^8$ | $3.0 \times 10^8$ | Baseline (Biological) |
| **A1** | **Current Earth** | Present-day anthropogenic + biological. | $2.3 \times 10^9$ | $1.5 \times 10^9$ | 1x (Current Benchmark) |
| **A2** | **Moderate ExoFarm** | Intensified agriculture. | $2.3 \times 10^{10}$ | $1.5 \times 10^{10}$ | ~15x $N_2O$ / 10x $NH_3$ |
| **A3** | **Extreme ExoFarm** | Maximum theoretical intensity. | $2.3 \times 10^{11}$ | $1.5 \times 10^{11}$ | ~150x $N_2O$ / 100x $NH_3$ |

*Note: Other species (CO, CH4, etc.) are kept at constant fluxes across all scenarios to isolate the effect of nitrogen-cycle disruption.*

---

## Usage

### Run Simulations
To run Earth simulations:
```bash
cd ExoFarm_Research/Scripts/Simulation
python run_parallel_earth.py
```

To run TRAPPIST-1e simulations:
```bash
cd ExoFarm_Research/Scripts/Simulation
python run_parallel_trappist.py
```

### Generate Plots
The plotting scripts read results from `ExoFarm_Research/Results/Outputs` and save images to `ExoFarm_Research/Results/Plots`.
You can generate all plots at once using the master script:
```bash
cd ExoFarm_Research/Scripts/Plotting
python run_all_plots.py
```

This will generate:
1. `agricultural_comparison.png`: Vertical profiles for Earth (N2O, NH3, O3, CH4).
2. `trappist_comparison.png`: Vertical profiles for TRAPPIST-1e (N2O, NH3, O3, CH4).
3. `surface_normalization_bars.png`: Normalized surface abundances vs Earth A1.
4. `star_comparison_profiles.png`: Comparative profiles (N2O, NH3, O3, CH4 + OH).
5. `star_comparison_trends.png`: Abundance trends (N2O, NH3, O3, CH4).
6. `stellar_spectra_comparison.png`: Input stellar spectra.

### View Result Tables
To view abundance tables in the terminal:
```bash
cd ExoFarm_Research/Scripts/Analysis
python extract_surface_values.py
```

## Requirements
- Python 3.x
- Libraries: `numpy`, `matplotlib`, `scipy`, `pandas`
- VULCAN (configured in the parent directory)
